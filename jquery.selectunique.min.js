/* jquery-selectunique.js v0.0.2 - http://github.com/sshaw/jquery-selectunique */
(function(c){var b="selectunique";var d=b+"-selected";var a=function(f,e){this.q=f.find("option").parent("select");this.options=c.extend({},e);this.refresh()};a.prototype={constructor:a,_selectChanged:function(e){var f=this,g=e.data(d);if(g){f.q.not(e).each(function(){var h=c(this);h.append(f._cloneOption(g));f._sortOptions(h)})}f._optionSelected(e)},_optionSelected:function(e){var f=this,g=e.find(":selected");if(f._ignoreOption(g)){e.data(d,null)}else{e.data(d,g);f.q.not(e).each(function(){var h=c(this);h.find("option").each(function(){var i=c(this);if(g.text()==i.text()){i.remove();return}})})}},_ignoreOption:function(e){return c.trim(e.val())==""||(c.isFunction(this.options.ignoreOption)&&this.options.ignoreOption(e))},_cloneOption:function(e){return e.clone(true).prop("selected",false)},_sortOptions:function(e){var f=this,g=e.find("option"),h=e.val();g.sort(function(j,i){return f.optionIndex[f._optionId(j)]-f.optionIndex[f._optionId(i)]});e.html(g);e.val(h)},_optionId:function(e){return[e.value,e.text].join("-")},_uniqueOptions:function(g){var f=this,h=[],e={};g.each(function(){var i=f._optionId(this);if(!e[i]&&!f._ignoreOption(c(this))){e[i]=true;h.push(this)}});return h},refresh:function(){var e=this;e.optionIndex={};e.q.off(b);e.q.on("change."+b,function(){e._selectChanged(c(this))});c(e._uniqueOptions(e.q.find("option"))).each(function(){e.optionIndex[e._optionId(this)]=this.index});e.q.has(":selected").each(function(){e._optionSelected(c(this))})},selected:function(){var e=this._uniqueOptions(this.q.find(":selected"));return c.map(e,function(f){return{value:f.value,text:f.text}})},remaining:function(){var e=this._uniqueOptions(this.q.find("option:not(:selected)"));return c.map(e,function(f){return{value:f.value,text:f.text}})}};c.fn.selectunique=function(e){if(this.has("select,option").length){var f=this.data(b);if(!f){this.data(b,f=new a(this,e))}if(typeof e=="string"&&f[e]){return f[e]()}}return this}})(window.jQuery);